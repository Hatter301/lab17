#include <iostream>
#include <vector>
using namespace std;
int main() {
	int n, k, a, i = 0, j=-1, s = 0, x,l1=1,l2=1,h=1,g;
	vector <int> v;
	cout << "Введите K" << endl;
	cin >> k;
	cout << "Введите N" << endl;
		cin >> n;
	if ((k <= 0)||(n<=0))
		cout << "Данные введены некорректно";
	else {
		cout << "Введите элементы массива" << endl;
		for (i = 0; i < n; i++) {
			cin >> a;
			v.push_back(a);
		}
		i = 0;
		for (i; i < v.size() - 1; i++) {
			if (v[i] != v[i + 1])
				s++;
			else {
				for (j=i;(v[j] == v[j + 1]) && (j < v.size() - 1);j++)
				s++;
					i = j;
			}
		}
		if (v[n-1]!=v[n-2])
		s++;
		if (k>s)
		cout << "Данные введены некорректно";
		else if (s==k)
		for (i = 0; i < v.size(); i++)
			cout << v[i] << " ";
			else {
			    s=0;
			i=0;
		for (i; i < v.size() - 1; i++) {
			if (v[i] != v[i + 1])
				s++;
			else {
				for (j=i;(v[j] == v[j + 1]) && (j < v.size() - 1);j++)
					l1++;
				s++;
				if (s != k)
					i = j;
			}
			if (s == k) {
				if (l1==1) {
				    for(x = v.size() - 1;(v[x] == v[x - 1]);x-=1) {
					v.insert(v.begin() + i + 1, v[x]);
					x++;
					l2++;
				}
				x = v.size() - 1;
				v.insert(v.begin() + i+1, v[x]);
				x = v.size() - 1;
				for(x;h<l2;x-=1)
					h++;
				v.erase(v.begin() + x, v.begin() + v.size());
					v.push_back(v[i]);
						v.erase(v.begin()+i);
				i=v.size();
				}
				else {
				    for(x = v.size() - 1;(v[x] == v[x - 1]);x-=1) {
					v.insert(v.begin() + j + 1, v[x]);
					x++;
					l2++;
				}
				    	x = v.size() - 1;
				v.insert(v.begin() + j+1, v[x]);
				x = v.size() - 1;
				for(x;h<l2;x-=1)
					h++;
				v.erase(v.begin() + x, v.begin() + v.size());
				x = i;
				while (x <= j) {
					v.push_back(v[x]);
					x++;
				}
				v.erase(v.begin() + i, v.begin() + j+1);
				i=v.size();
				}
			}
			l1=1;
		}
		for (i = 0; i < v.size(); i++)
			cout << v[i] << " ";
	}
	}
	return 0;
}
